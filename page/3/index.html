<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">






















<link href="/Sunny7464/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/Sunny7464/css/main.css?v=6.4.0" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/Sunny7464/images/apple-touch-icon-next.png?v=6.4.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/Sunny7464/images/favicon-32x32-next.png?v=6.4.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/Sunny7464/images/favicon-16x16-next.png?v=6.4.0">


  <link rel="mask-icon" href="/Sunny7464/images/logo.svg?v=6.4.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/Sunny7464/',
    scheme: 'Muse',
    version: '6.4.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta property="og:type" content="website">
<meta property="og:title" content="Jiaao &amp; 7">
<meta property="og:url" content="https://jiaaodong.github.io/Sunny7464/page/3/index.html">
<meta property="og:site_name" content="Jiaao &amp; 7">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Jiaao &amp; 7">






  <link rel="canonical" href="https://jiaaodong.github.io/Sunny7464/page/3/">



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Jiaao & 7</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/Sunny7464/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Jiaao & 7</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/Sunny7464/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/Sunny7464/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>
  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jiaaodong.github.io/Sunny7464/Sunny7464/2018/11/08/SSD的使用/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jiaao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/Sunny7464/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jiaao & 7">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Sunny7464/2018/11/08/SSD的使用/" itemprop="url">
                  SSD的使用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-11-08 20:43:41" itemprop="dateCreated datePublished" datetime="2018-11-08T20:43:41+01:00">2018-11-08</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-12-18 20:19:35" itemprop="dateModified" datetime="2018-12-18T20:19:35+01:00">2018-12-18</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-Preface"><a href="#1-Preface" class="headerlink" title="1. Preface"></a>1. Preface</h3><p>最近需要用到SSD的目标检测来做一个demo，因此今天在配置SSD。</p>
<h3 id="2-Setup"><a href="#2-Setup" class="headerlink" title="2. Setup"></a>2. Setup</h3><p>使用一个现成的Github项目，第一步肯定就是按照人家的README乖乖配置环境。我的笔记本啥都干不了，硬盘空间放不下一个数据集，CPU是低压版，没有GPU，所以我都是习惯性用Google Cloud Platfom（GCP），我的Setup也都是基于我使用的Ubuntu 16.04 镜像来实现的。不过这个镜像和一般的Ubuntu16也没什么不同。</p>
<h4 id="2-1-克隆-SSD-远程仓库"><a href="#2-1-克隆-SSD-远程仓库" class="headerlink" title="2.1 克隆 SSD 远程仓库"></a>2.1 克隆 SSD 远程仓库</h4><ul>
<li>从<a href="https://github.com/weiliu89/caffe/tree/ssd" target="_blank" rel="noopener">SSD</a>的github中找到Installation。然后把他们的repository给clone过来，接下来开始配置Caffe。<h4 id="2-2-配置Caffe"><a href="#2-2-配置Caffe" class="headerlink" title="2.2 配置Caffe"></a>2.2 配置Caffe</h4></li>
<li><a href="http://caffe.berkeleyvision.org/installation.html#compilation" target="_blank" rel="noopener">Caffe 的安装</a></li>
<li>Caffe的编译需要根据本地的Python 环境来改写Makefile.config文件，主要需要修改的是Python的路径和numpy的路径，Makefile.config里面的注释写得比较清楚，我的Python环境是用Anaconda配置的，所以我就把Python的路径改成了我的Anaconda路径，其实文件里已经写好了，只需要把Python的版本改成3.7就行了。我暂时不想用GPU（因为谷歌的GPU还是挺贵的，虽然是按照使用时间收费，但是我还不清楚是按照instance的使用时间收费还是按照GPU的使用时间收费），所以把<code>cpu_only</code>设置为1。把<code>BLAS</code>改成自己用的，我用的是<code>atlas</code>，这个取决于在上一步安装的时候究竟安装了哪个pkg。</li>
<li>然后开始编译，<code>make all</code>，或者<code>make -j8</code>多线程快速编译（我对j8还没怎么理解）结果就遇到了<a href="https://github.com/BVLC/caffe/wiki/Commonly-encountered-build-issues" target="_blank" rel="noopener">在编译Caffe时候的常见问题</a>中提到的1-4，根据网页上说的解决方法把问题解决（主要就因为缺少一些Debian的pkg，毕竟我每次都会新创建一个服务器instance，里面什么都没有，只有必备的Ubuntu16，连Anaconda都是自己下载的）。</li>
<li>然后再次编译（记得次重新编译前用一下<code>make clean</code>），又出现了以下的错误:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CXX/LD -o .build_release/tools/create_label_map.bin</span><br><span class="line">.build_release/lib/libcaffe.so: undefined reference to `boost::re_detail::cpp_regex_traits_implementation&lt;char&gt;::tr</span><br><span class="line">ansform_primary(char const*, char const*) const&apos;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>这个错误主要是boost的错误，在<a href="https://github.com/BVLC/caffe/issues/6043" target="_blank" rel="noopener">这个issue</a>里面有相关解答和<a href="https://github.com/rbgirshick/fast-rcnn/issues/52" target="_blank" rel="noopener">这个</a></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jiaaodong.github.io/Sunny7464/Sunny7464/2018/11/04/如何在Linux-Server中使用多个terminal/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jiaao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/Sunny7464/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jiaao & 7">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Sunny7464/2018/11/04/如何在Linux-Server中使用多个terminal/" itemprop="url">
                  如何在Linux Server中使用多个terminal
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-11-04 17:01:30" itemprop="dateCreated datePublished" datetime="2018-11-04T17:01:30+01:00">2018-11-04</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-12-18 20:20:12" itemprop="dateModified" datetime="2018-12-18T20:20:12+01:00">2018-12-18</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li>通过<code>screen</code>来实现用一个ssh连接到server后打开多个terminal。<br><a href="https://help.ubuntu.com/community/Screen" target="_blank" rel="noopener"><code>screen</code>的使用</a></li>
<li>通过多个ssh连接到server。<br><a href="https://www.howtogeek.com/240809/is-it-possible-to-have-multiple-ssh-connections-to-the-same-system/" target="_blank" rel="noopener">关于是否可以这样做的解释</a><ul>
<li>The Short Answer:<blockquote>
<p>Yes, it usually works by default.</p>
</blockquote>
</li>
<li>The Long Answer:<blockquote>
<p>It depends on what you are using it for. It may slow down with multiple connections, but that is a bandwidth issue, not an SSH issue.”</p>
</blockquote>
</li>
</ul>
</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jiaaodong.github.io/Sunny7464/Sunny7464/2018/11/03/自动驾驶nuScenes数据集——一个KITTI以外的新数据集/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jiaao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/Sunny7464/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jiaao & 7">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Sunny7464/2018/11/03/自动驾驶nuScenes数据集——一个KITTI以外的新数据集/" itemprop="url">
                  自动驾驶nuScenes数据集——一个KITTI以外的新数据集
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-11-03 00:07:49" itemprop="dateCreated datePublished" datetime="2018-11-03T00:07:49+01:00">2018-11-03</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-12-18 20:20:56" itemprop="dateModified" datetime="2018-12-18T20:20:56+01:00">2018-12-18</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-数据集简介"><a href="#1-数据集简介" class="headerlink" title="1. 数据集简介"></a>1. 数据集简介</h2><p><img src="https://img-blog.csdnimg.cn/20181103225533690.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MDk5NDkxMw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">（图片来源：<a href="https://www.nuscenes.org/data-collection" target="_blank" rel="noopener">https://www.nuscenes.org/data-collection</a> ）<br><a href="https://www.nuscenes.org/" target="_blank" rel="noopener">nuScenes数据集</a> 是自动驾驶公司nuTonomy建立的大规模自动驾驶数据集，该数据集不仅包含了Camera和Lidar，还记录了雷达数据，是我所知道的唯一一个有雷达数据的数据集。<br>这个数据集由1000个场景组成（即scenes，这就是该数据集名字的由来），每个scenes长度为20秒，包含了各种各样的情景。在每一个scenes中，有40个关键帧（key frames），也就是每秒钟有2个关键帧，其他的帧为sweeps。关键帧经过手工的标注，每一帧中都有了若干个annotation，标注的形式为bounding box。不仅标注了大小、范围、还有类别、可见程度等等。这个数据集不久前发布了一个teaser版本（包含100个scenes），正式版（1000个scenes）的数据要2019年发布。<br>这个数据集在sample的数量上、标注的形式上都非常好，记录了车的自身运动轨迹（相对于全局坐标），包含了非常多的传感器，可以用来实现更加智慧的识别算法和感知融合算法。<br>本文描述了如何在一个新的Google Cloud Platform（下文简称GCP）Compute Engine - VM instance上使用这个数据集，关于如何创建和使用GCP，有很多现成的材料可以学习，作者最早是通过<a href="http://cs231n.github.io/gce-tutorial/" target="_blank" rel="noopener">Stanford CS231n课的谷歌云教程</a>学习的谷歌云。本教程所使用的谷歌云镜像参数如下：<br>参数名称 | 数值<br>——– | —–<br>Machine type  | n1-standard-4 (4 vCPUs, 15 GB memory)<br>Boot disk and local disks  | 100GB <strong>SSD persistent disk</strong><br>Source image   | ubuntu-1604-xenial-v20181030<br>如果读者想在自己的PC机上面使用这个数据集，则可以跳过从Google Bucket把数据拷贝到server的硬盘中的步骤。</p>
<h2 id="1-1-Setup"><a href="#1-1-Setup" class="headerlink" title="1.1 Setup"></a>1.1 Setup</h2><p>数据集可以通过注册nuScenes网站后，在 <a href="https://www.nuscenes.org/download" target="_blank" rel="noopener">Download</a> 页面下载，里面有五个下载项，其中metadata and annotation 是必须要下载的，其他数据可以根据需要下载。下载后的数据是 tbz2 格式的压缩文件，需要经过两次解压缩。<br>在 <a href="https://github.com/nutonomy/nuscenes-devkit" target="_blank" rel="noopener">nuScenes-devkit github page</a> 上面有一个可以用来visualization的开发工具。</p>
<h3 id="1-1-1-Python-version"><a href="#1-1-1-Python-version" class="headerlink" title="1.1.1 Python version"></a>1.1.1 Python version</h3><p>如果想要用nuScenes的开发工具，需要Python 3.7版本，具体的安装方式在上文的github上面有提到，但是较为推荐的是在一个虚拟环境下安装python 3.7。</p>
<h3 id="1-1-2-Python-virtual-environment"><a href="#1-1-2-Python-virtual-environment" class="headerlink" title="1.1.2 Python virtual environment"></a>1.1.2 Python virtual environment</h3><p><a href="https://github.com/nutonomy/nuscenes-devkit" target="_blank" rel="noopener">nuScenes-devkit github page</a> 的教程中用的是虚拟环境管理包 virtualenvwrapper 来创建虚拟环境，关于虚拟环境，可以参考 <a href="https://uoa-eresearch.github.io/eresearch-cookbook/recipe/2014/11/20/conda/" target="_blank" rel="noopener">这篇文章</a> 或者<a href="https://virtualenvwrapper.readthedocs.io/en/latest/index.html" target="_blank" rel="noopener">virtualenvwrapper</a> 和 <a href="https://pypi.org/project/virtualenv/" target="_blank" rel="noopener">virtualenv</a>。其实我个人是偏好使用Anaconda内嵌的虚拟环境管理工具的，关于Anaconda与Virtualenv的比较，<a href="https://jakevdp.github.io/blog/2016/08/25/conda-myths-and-misconceptions/" target="_blank" rel="noopener">“You actually can install (some) conda packages within a virtualenv, but better is to use Conda’s own environment manager: it is fully-compatible with pip and has several advantages over virtualenv.”</a><br>Anaconda创建新环境的命令为：<br><code>conda create --name myenv</code><br>创建了新环境以后进入新环境的命令为：<br><code>source activate myenv</code><br>（其他命令可以查阅<a href="https://conda.io/docs/user-guide/tasks/index.html" target="_blank" rel="noopener">conda 文档</a> ）</p>
<h3 id="1-1-3-Storage-buckets"><a href="#1-1-3-Storage-buckets" class="headerlink" title="1.1.3  Storage buckets"></a>1.1.3  Storage buckets</h3><p>想要使用Google Cloud Platform来下载数据集，我主要采取两个方法，一个方法是在terminal中输入wget + [http address]，但是如果想要下载nuScenes数据集，直接用wget是不行的，该数据集需要一定的权限才能访问。另一个方法是这篇博客使用的方法——将数据集从我的本地硬盘传到cloud storage的bucket中，再进入GCP VM instance将数据从bucket拷贝到VM instance的硬盘里。过程如下：</p>
<ul>
<li>进入cloud storage创建一个object</li>
<li>将数据集上传到object</li>
<li>将数据集从buckets拷贝到instance<br>==在拷贝和解压数据集的过程中，VM instance的硬盘空间可能会不够用（数据占50GB），因此可以考虑讲硬盘的内存调大。这就是Google VM instance的方便之处：随时根据需要设置硬件的参数==<br>命令如下<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gsutil cp gs://[buckets object name]/[filename] [target folder name]</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>for example:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gsutil cp gs://[buckets object name]/nuscenes_teaser_meta_v1.tbz2 ./</span><br></pre></td></tr></table></figure></p>
<h2 id="2-数据集的使用"><a href="#2-数据集的使用" class="headerlink" title="2. 数据集的使用"></a>2. 数据集的使用</h2><ul>
<li><p>解压</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bzip2 -d [filename]</span><br></pre></td></tr></table></figure>
</li>
<li><p>二次解压</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar xf [filename]</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="PCD文件"><a href="#PCD文件" class="headerlink" title="PCD文件"></a>PCD文件</h3><p>文件 nuscenes.py 的第453行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pc = PointCloud.from_file(osp.join(self.nusc.dataroot, pointsensor[&apos;filename&apos;]))</span><br></pre></td></tr></table></figure></p>
<h3 id="Metadata"><a href="#Metadata" class="headerlink" title="Metadata"></a>Metadata</h3><p>javascript文件中是每一个元数据的表格，可以用token来identify，这些元数据是用来表达数据之间的对应关系的。比如某一个scene对应哪些sample，这个sample有哪些传感器，传感器又有哪些数据。radar 和 lidar 都是用pcd文件记录的数据，camera 是 jpg。</p>
<h3 id="Shortcut"><a href="#Shortcut" class="headerlink" title="Shortcut"></a>Shortcut</h3><p>这个数据集中所有的标注是通过json文件完成的，json文件如同为我们定义了一个graph结构，这个graph里的每一个节点是scene, sample, instance, data, category等等，我们可以通过token在这个graph中寻找我们需要的部分，比如说在多个sample关键帧中找到同一个骑自行车的人。</p>
<p>这个数据集的标注中，只有一对一的对应关系，很少有一对多的对应关系，但是有时候这种对应关系又非常重要，比如说给定一个sample，我想要sample中所有的annotation，又或者给定一个instance，我想要得到所有该instance的annotation，于是在nuScenes提供的dev-kit中，为使用者设置了很多的Shortcuts。即整理好了的“一对多”。</p>
<h3 id="开发者提供的函数"><a href="#开发者提供的函数" class="headerlink" title="开发者提供的函数"></a>开发者提供的函数</h3><p>开发者在github上提供了可以用来可视化Nuscenes数据集的函数，叫<code>nusenes.py</code>，在随同提供的Jupyter notebook中这个函数被声明为<code>nusc</code>。注意，真正在Jupyter notebook中使用的很多函数其实在nusc.explore类中，因此如果要在nusc.explorer中定义新的方法，要在nusc中把shortcut加上。</p>
<h2 id="3-遇到的问题"><a href="#3-遇到的问题" class="headerlink" title="3. 遇到的问题"></a>3. 遇到的问题</h2><h3 id="3-1-没有足够的空间"><a href="#3-1-没有足够的空间" class="headerlink" title="3.1 没有足够的空间"></a>3.1 没有足够的空间</h3><h3 id="3-2-opencv版本问题"><a href="#3-2-opencv版本问题" class="headerlink" title="3.2 opencv版本问题"></a>3.2 opencv版本问题</h3><p>在运行Jupyter notebook的时候出现错误<br><code>cannot open shared object file: No such file or directory</code><br><a href="https://stackoverflow.com/questions/47113029/importerror-libsm-so-6-cannot-open-shared-object-file-no-such-file-or-directo" target="_blank" rel="noopener">解决办法</a></p>
<ul>
<li><code>sudo apt-get install libsm6 libxrender1 libfontconfig1</code></li>
<li><code>pip install opencv-contrib-python</code><h3 id="3-3-Dataset的位置"><a href="#3-3-Dataset的位置" class="headerlink" title="3.3 Dataset的位置"></a>3.3 Dataset的位置</h3>如果没有把dataset存到根目录下，也可以把它存到nuscenes-devkit的目录下，然后把路径从<code>dataroot=&#39;/data/nuscenes&#39;</code>换成<code>dataroot=&#39;./data/nuscenes&#39;。</code></li>
</ul>
<h2 id="4-数据集的可视化"><a href="#4-数据集的可视化" class="headerlink" title="4. 数据集的可视化"></a>4. 数据集的可视化</h2><p>（待填）</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jiaaodong.github.io/Sunny7464/Sunny7464/2018/11/02/Faster-R-CNN中的RPN/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jiaao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/Sunny7464/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jiaao & 7">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Sunny7464/2018/11/02/Faster-R-CNN中的RPN/" itemprop="url">
                  Faster R-CNN中的RPN
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-11-02 03:17:52" itemprop="dateCreated datePublished" datetime="2018-11-02T03:17:52+01:00">2018-11-02</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-12-18 20:21:42" itemprop="dateModified" datetime="2018-12-18T20:21:42+01:00">2018-12-18</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>今天在读Faster R-CNN。</p>
<p>之前读过一次，当时正在看SSD，感觉Faster R-CNN的网络结构和SSD有一些相似，所以Faster R-CNN就只是粗略地看了一下。今天当我有时间仔细读了一下以后，突然被一个问题卡住了——下图中从feature map到256-d向量的intermediate networks是什么？<br><img src="https://img-blog.csdnimg.cn/20181102033008862.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MDk5NDkxMw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">从图中可以看出，我们截取了CNN（比如VGG-16）的前半部分用于提取特征（常常是直觉用pre-trained model就行了），然后在输出的Feature Map中应用一个3 x 3的Sliding Window，每一个位置输出k个bounding boxes。但是，从这个Feature Map到bounding box的intermediate layer输出的是一个256-d的特征向量，原文中说是这个特征向量通过了全连接层得到的k个bounding boxes，那么这里的intermediate layer究竟是什么呢？</p>
<p>从<a href="https://www.youtube.com/watch?v=X3IlbjQs190" target="_blank" rel="noopener">这部视频</a>中我恍然大悟，从Feature Map到256-d特征向量是非常Straightforward的一件事（当我看懂了才觉得Straightforward以及我太菜了）所谓的Sliding Window，只是为了模型的原理更容易被解释，毕竟卷积层的本质就是一个kernel在一个feature map上面做sliding window。如果用Sliding window的方法来解释，这个过程变成了：一个3 x 3的窗口在输入RPN的Feature Map上面滑动（注意，另一个容易令人产生迷惑感的地方在于，虽然窗口只有 3 x 3，==但是需要 256 x 3 x 3 x 256个参数==才能把一个==3 x 3 x 256==的输入映射到一个==1 x 1 x 256==的vector），在滑动过程中，输入RPN的Feature Map的每一个像素值都由此得到了一个256-d的vector（或512-d，取决于用ZF还是用VGG-16），然后这个vector通过了一个全连接层得到了6k个输出，即，每一个 3 x 3的crop都会得到6k个输出，为k个bounding boxes的坐标、offset、objectiveness score（这里objectiveness score的意思是有object的可能性）。</p>
<p>下面我来说为什么作者又用了一定的篇幅来讲从卷积的角度如何理解刚才的sliding window：</p>
<p>实际上，前一层的Feature Map被256  x 3 x 3 x 256的kernel做卷积运算（<a href="https://zhuanlan.zhihu.com/p/44599606" target="_blank" rel="noopener">这篇知乎专栏</a>的图是非常好的一幅图），就可以得到W x H x 256的输出（W X H是输入RPN的feature map的resolution），这与sliding window在每一个位置都得到一个256-d vector的效果是一样的。关键就在于，这256-d vector如何能够直接在每一个位置都通过一个==相同==的全连接网络得到一个6k长的向量。这时候就要提到CNN的一个重要特性——通过卷积来实现空间上的参数共享。==一个256 x 1 x 1 x 6k 的kernel，本质上就是一个滑动的、将256个元素对应到6k个元素的小型全连接网络。== 这个观点来自于Fully Convolutional Networks那篇文章，感兴趣的读者可以看<a href="https://people.eecs.berkeley.edu/~jonlong/long_shelhamer_fcn.pdf" target="_blank" rel="noopener">Fully convolutional networks for semantic segmentation</a>. 这个网络确实只有256 x 6k个参数，读者非常自豪地说，比MultiBox的参数少多了，但第4页的注释5提到了如果你考虑将输入RPN的Feature Map转为一个个256-d vector的那层（即feature projection layers），那一层的参数数量是3 x 3 x 512 x 512，整体参数就也不算少了。 </p>
<p>我们从头捋一遍，以VGG-16为例，根据视频中所讲，conv13的Feature Map是输入RPN的Feature Map（在该项目github的python实现中是conv5_3层），这个conv13的分辨率大约为40 x 60 ~ 2400。用一个3 x 3的Sliding Window（or, in fact, a kernel）走过Feature Map中的每一个像素点，将3 x 3 x 512的小块Feature Map映射到1 x 1 x 512 的Feature中，参数数量为512 x 3 x 3 x 512（我喜欢这样写一个卷积层的参数，因为正好是按照“上一层channel数”-本层的卷积大小-“本层的channel数”来排列，便于理解），接着通过一个全联结层，得到bounding box的坐标和分数。设k（生成的bounding box的数量）为9，则全联结层用一组参数将所有的512-d特征向量映射到9个数字，参数数量为512 x 9。总的参数为512 x 3 x 3 x 512 + 512 x 9。</p>
<p>这个Sliding Window的机制，使该全联结网络的参数对于Feature Map中的每一个像素点是共享的，也就是说，所有的512-d的vector都是通过同一组参数做推断，这组参数应用于所有位置的像素点，所以才能够让RPN做到translational invariance。</p>
<h3 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h3><p>Long, J., Shelhamer, E., &amp; Darrell, T. (2015). Fully convolutional networks for semantic segmentation. Proceedings of the IEEE Computer Society Conference on Computer Vision and Pattern Recognition, 07–12–June, 3431–3440. <a href="https://doi.org/10.1109/CVPR.2015.7298965" target="_blank" rel="noopener">https://doi.org/10.1109/CVPR.2015.7298965</a></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jiaaodong.github.io/Sunny7464/Sunny7464/2018/09/17/Learning-Algorithms-Data-Structure-Intro/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jiaao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/Sunny7464/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jiaao & 7">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Sunny7464/2018/09/17/Learning-Algorithms-Data-Structure-Intro/" itemprop="url">
                  [Learning Algorithms] - Data Structure Intro
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-09-17 23:16:48" itemprop="dateCreated datePublished" datetime="2018-09-17T23:16:48+02:00">2018-09-17</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-12-18 08:42:40" itemprop="dateModified" datetime="2018-12-18T08:42:40+01:00">2018-12-18</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-What-is-data-structure"><a href="#1-What-is-data-structure" class="headerlink" title="1. What is data structure"></a>1. What is data structure</h2><p>From the definition in <a href="https://en.wikipedia.org/wiki/Data_structure" target="_blank" rel="noopener">Wikipedia Data structure</a>. </p>
<blockquote>
<p>In <a href="https://en.wikipedia.org/wiki/Computer_science" title="Computer science" target="_blank" rel="noopener">computer science</a>, a <strong>data structure</strong> is a data organization, management and storage format that enables efficient access and modification.</p>
</blockquote>
<p>This is a two-fold definition. On one hand, it defines what is data structure:</p>
<blockquote>
<p>Data structure is a <strong>data format</strong>.</p>
</blockquote>
<p>On the other hand, it explains why do we need different data structures:</p>
<blockquote>
<p>Data structure enables efficient access and modification of the data.</p>
</blockquote>
<p>Basically, if we only consider data structure itself, it is all about how to store the data.</p>
<h2 id="2-Why-do-we-need-data-structure"><a href="#2-Why-do-we-need-data-structure" class="headerlink" title="2. Why do we need data structure"></a>2. Why do we need data structure</h2><p>Now that we have known what data structure is, we need to know why do we need it. We seem to be very comfortable when we are using MATLAB array and Numpy array. They are easy to use and friendly to math representation. Why do we still need the hassle of implementing a Red-Black tree or a graph?</p>
<p>When we are programming, we always need to load, process and store some data (For MATLAB and Python Numpy users, arrays are usually the case). But simply storing these data is far from enough. We also need to access them when needed. How to access them? The answer of this question seems trivial:</p>
<blockquote>
<p>We can access them by index in MATLAB array or by a key in Python’s dictionary. </p>
</blockquote>
<p>However, this is an imcomplete answer. Programming language constructs a bridge between data and programmer, through the language’s environment such as an interpreter, a compiler, ect. But how can language access data?  The data is stored in the memory with a certain address. Different data types occupy different space (8 bits for uint8, 16 or 32 bits for float, etc). The address is not very easy for a human being to understand intuitively. They look like a combination of numbers and characters. But we need to know the first, second, third number in our vector simply by the index. Otherwise computer doesn’t know what is the first number in our vector or what is the correspondance between a key and the value (Also known as satellitte data) even though we have already stored them in the memory. </p>
<p>Moreover, If you have used MATLAB, you might also observe that it allows you to grow the array when running the program. But it will warn you that this is not very efficient. This is called dynamic allocation of the memory. In C++ this means allocate memory for the data after compilation. The dynamic data allocation also need data structure.</p>
<p>On top of the storage, we also need to retrieve the data. For example, for a list of numbers, we want the last element or the largest one. It is easy for us to search all of them. But if we check the element one by one and compare them with all the other elements, it might not be a good choice. To efficiently achieve the data retrival, data structure helps a lot. I think that’s why in the book <em>Introduction of algorithms</em> there are more than one chapter to talk about data structure.</p>
<p>Moreover, many real-life cases need data structure to facilitate programming. For example, if we want to undo some editted content in an editor, the undo button should be implemented by a stack, which is based on the Last-in-first-out (LIFO) principle.</p>
<p>In a word, data is data, but a good way to manage the data can help to save time and space. This is not only achieved by algorithms, but also by smart data structures.</p>
<h2 id="3-What-is-the-relationship-between-data-structure-and-programming-language"><a href="#3-What-is-the-relationship-between-data-structure-and-programming-language" class="headerlink" title="3. What is the relationship between data structure and programming language?"></a>3. What is the relationship between data structure and programming language?</h2><p><strong>Please don’t confuse the Data Structure Theories with Programming languages!</strong> </p>
<p>Data Structure does not rely on certain language, but they need to be implemented by languages. On the other way round,  languages are using certain data structures to form new data structures of their own.  </p>
<p>When I started learning data structure, I am already very familiar with MATLAB, C++ and Python. The data in those programming languages are organized in various ways, such as array and cell in MATLAB, list, tuple, dictionary in Python and vector in C++ standard libraries. So I am always wondering the relationships between what we learn as data structure and the data structures in those languages.</p>
<p>During this process, I am also doing some exercises on <a href="https://leetcode.com/" target="_blank" rel="noopener">Leetcode</a>, where there are many problems related to data structure. The same problem can be solved using different languages, which helps me decouple data structure theories with specific language implementations.</p>
<p>For example, when we consider the problems using Hash Table, we are usually deal with some searching problems, such as the problem <a href="https://leetcode.com/problems/two-sum/description/" target="_blank" rel="noopener">#1 Two sum</a>. We need to search across previously saved results according to the newly encountered ones. During this procedure, we need correspondances, thus Hash Table is a good data structure to facilitate the procedure. It can retrieve the satellite data by the key with low time complexity. In Python, dictionary is implemented by Hash Table. In Java and C++, Hash Map does the same job.   </p>
<p>Unlike Hash Table has its counterpart in various languages. A tree should be constructed by a Class in most Object-oriented languages. A tree is organized by nodes. Each node stores the pointer to the parent node, the pointers to the children nodes and the value of satellite data. In Leetcode tree node, they are called <code>root.left</code>, <code>root.right</code> and <code>root.val</code>. (Leetcode tree node doesn’t have parent node pointer.) Until now you may ask, is it only be able to implement a tree by pointers? What if a language does not have pointer implementation such as Python? This is what I call “decouples the language and data structure”. In leetcode, the incoming tree is just a list. What is the “Pointer”? -The indices of the element. The first element in the list is the root of the tree. The second and the third are the children of the root and so on and so forth. We can use the principle and algorithms of a binary tree to facilitate sorting or other tasks. The list is just a notation.</p>
<h2 id="4-Conclusion"><a href="#4-Conclusion" class="headerlink" title="4. Conclusion"></a>4. Conclusion</h2><p>Data Structure is a theory of how to organize the data. The theory doesn’t rely on particular programming languages. We can find Data Structure playing roles not only in any of the programming languages, but also in other fields, such as the look-up-table in the compiler. We can facilitate some computations not only by good algorithms such as Divide-and-conquer, but also by smart Data Structures.</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ol>
<li><a href="https://mitpress.mit.edu/books/introduction-algorithms-third-edition" target="_blank" rel="noopener">Cormen, T. H., Leiserson, C. E., Rivest, R. L., &amp; Stein, C. (2009). <em>Introduction to algorithms</em>. MIT press.</a></li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jiaaodong.github.io/Sunny7464/Sunny7464/2018/08/19/Sorting-Algorithms/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jiaao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/Sunny7464/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jiaao & 7">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Sunny7464/2018/08/19/Sorting-Algorithms/" itemprop="url">
                  Sorting Algorithms
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-08-19 13:41:47" itemprop="dateCreated datePublished" datetime="2018-08-19T13:41:47+02:00">2018-08-19</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-12-18 08:42:40" itemprop="dateModified" datetime="2018-12-18T08:42:40+01:00">2018-12-18</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>These days I am reading the book &lt;<strong>Introduction to algorithms</strong>&gt;. This week I have learnt several sorting algorithms in this book and implemented some of them. The mentioned algorithms are merge sort, heap sort, quick sort, counting sort, radix sort and bucket sort. During learning, I also learnt some methods to analyze and design an algorithm, among which the most important one is divide-and-conquer.</p>
<h2 id="Merge-Sort"><a href="#Merge-Sort" class="headerlink" title="Merge Sort"></a>Merge Sort</h2><p>Merge sort is an algorithm that divide the whole sort task into two subtasks. Then divide each subtask also into two subtasks. Until the list contains only one element, it will be merged into larger lists with ordered elements. The design principle is <strong>divide-and-conquer</strong>. </p>
<p>The python code of merge sort is:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"># Merge two sorted series</span><br><span class="line">import numpy as np</span><br><span class="line">import math</span><br><span class="line"></span><br><span class="line">def Merge(A, p, q, r):</span><br><span class="line">    n1 = q - p + 1</span><br><span class="line">    n2 = r - q</span><br><span class="line">    L = np.zeros(n1+1)</span><br><span class="line">    R = np.zeros(n2+1)</span><br><span class="line">    for i in np.arange(0, n1):</span><br><span class="line">        L[i] = A[p + i]</span><br><span class="line">    for j in np.range(0, n2):</span><br><span class="line">        R[j] = A[q + j + 1]</span><br><span class="line">    L[n1] = math.inf</span><br><span class="line">    R[n2] = math.inf</span><br><span class="line">    i = 0</span><br><span class="line">    j = 0</span><br><span class="line">    for k in np.arange(p, r+1):</span><br><span class="line">        if L[i] &lt; R[j]:</span><br><span class="line">            A[k] = L[i]</span><br><span class="line">            i = i + 1</span><br><span class="line">        else:</span><br><span class="line">            A[k] = R[j]</span><br><span class="line">            j = j + 1</span><br><span class="line"></span><br><span class="line">def Merge_Sort(A, p, r):</span><br><span class="line">    if p &lt; r:</span><br><span class="line">        q = int(np.floor((p + r) / 2))</span><br><span class="line">        Merge_Sort(A, p, q)</span><br><span class="line">        Merge_Sort(A, q+1, r)</span><br><span class="line">        Merge(A, p, q, r)</span><br><span class="line"></span><br><span class="line">A = [4., 1., 7., 2., 3., 5., 9, 4]</span><br><span class="line">print(&quot;The original array A: &quot;, A)</span><br><span class="line"># Merge(A, 0, 0, 1)</span><br><span class="line"># B = Merge(A, 0, 2, 5)</span><br><span class="line">Merge_Sort(A, 0, len(A)-1)</span><br><span class="line">print(&quot;The array A after merge-sort: &quot;, A)</span><br><span class="line"></span><br><span class="line">## Pay special attention to the integer value for the np.array(shape)</span><br></pre></td></tr></table></figure></p>
<h2 id="Heap-Sort"><a href="#Heap-Sort" class="headerlink" title="Heap Sort"></a>Heap Sort</h2><p>Let’s start with insertion sort. Insertion sort is making many repeated comparisons. Although it is better than randomly choosing a pair of elements and comparing all possible pairs($n!$ times comparison). It still does many unnecessary comparings. For example, if $A$ is already larger than $B$ and $B$ is already larger than $C$, it is useless to compare $A$ and $C$. From the proof in the book, we could see that the most efficient way to do the comparing should take at least $O(nlog(n))$ time. Heap sort has achieved this bound. </p>
<ul>
<li>Heap sort uses a data structure called <strong>Heap</strong> to facilitate the sorting. </li>
<li>It uses the hierarchical structure of the tree to implement a more efficient comparison than insertion sort. </li>
<li>The heap is basically a list,  that can be found in most programming languages. </li>
<li>The heap is manipulating the index of the list. Most data in this heap(about $n/2$) is located on the leaves. </li>
<li>This sorting algorithm is <strong>in place</strong>.  It only does exchanges. </li>
<li>A heap not only contains the value and index of a list. It also contains a value called <strong>heap size</strong>. Therefore, the algorithm is implemented by a class. </li>
<li><strong>Max_heapify</strong> is a procedure where the lower element flows downwards.</li>
<li>Python can do the exchange in <code>A[largest], A[i] = A[i], A[largest]</code></li>
<li>Why we need to repeat heapify buttom-up when building a max heap? Because the heapify algorithm couldn’t ‘see’ more than 2 levels of the binary tree. In other words, it is uncertain whether the subtree of the selected node is a max heap.</li>
<li>The index conventions are different over different programming languages. If the first index of a list is $0$, the left node is $ 2i+1 $ and the right node is $ 2i + 2 $ . </li>
</ul>
<p>The code of heap sort is shown bellow:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">class sort:</span><br><span class="line">    &quot;&quot;&quot; This is a class of sort algorithms&quot;&quot;&quot;</span><br><span class="line">    def __init__(self, array):</span><br><span class="line">       self.A = array</span><br><span class="line">       self.HeapSize = len(B)</span><br><span class="line">    </span><br><span class="line">    def max_heapify(self, i):</span><br><span class="line">        largest = i </span><br><span class="line">        l = 2 * i + 1</span><br><span class="line">        r = 2 * i + 2</span><br><span class="line">        if l &lt; self.HeapSize and self.A[l] &gt; self.A[i]:</span><br><span class="line">                largest = l</span><br><span class="line">        if r &lt; self.HeapSize and self.A[r] &gt; self.A[largest]:</span><br><span class="line">                largest = r</span><br><span class="line">        if largest != i:</span><br><span class="line">            self.A[i], self.A[largest] = self.A[largest], self.A[i]</span><br><span class="line">            self.max_heapify(largest)</span><br><span class="line">            </span><br><span class="line">    def build_max_heap(self):</span><br><span class="line">        self.HeapSize = len(self.A)</span><br><span class="line">        for i in range(len(self.A) // 2, 0, -1):</span><br><span class="line">            self.max_heapify(i)</span><br><span class="line">            </span><br><span class="line">    def heap_sort(self):</span><br><span class="line">        self.build_max_heap()</span><br><span class="line">        for i in range(len(self.A)-1, 0, -1):</span><br><span class="line">            self.A[0], self.A[i] = self.A[i], self.A[0]</span><br><span class="line">            self.HeapSize = self.HeapSize - 1</span><br><span class="line">            self.max_heapify(0)</span><br><span class="line">            </span><br><span class="line">    </span><br><span class="line">B = [16, 4, 10, 14, 7, 9, 3, 2, 8, 1]</span><br><span class="line">HeapSort = sort(B)</span><br><span class="line">HeapSort.heap_sort()</span><br><span class="line">HeapSort.A</span><br></pre></td></tr></table></figure>
<h2 id="Quick-Sort"><a href="#Quick-Sort" class="headerlink" title="Quick Sort"></a>Quick Sort</h2><p>Quick sort is achieved by a method called <strong>partitioning</strong>. This algorithm is in worst case $O(n^2)$ but on average $O(nlog(n))$. It uses the principle of randomized algorithms, which induce some degree of random into the algorithm.  </p>
<p>The python code:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">class quicksort():</span><br><span class="line">    def __init__(self, array):</span><br><span class="line">        self.A = array</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    def partition(self, p, r):</span><br><span class="line">        x = self.A[r]</span><br><span class="line">        i = p - 1</span><br><span class="line">        for j in np.arange(p, r):</span><br><span class="line">            if self.A[j] &lt;= x:</span><br><span class="line">                i += 1</span><br><span class="line">                self.A[i], self.A[j] = self.A[j], self.A[i]</span><br><span class="line">        self.A[i + 1], self.A[r] = self.A[r], self.A[i + 1]</span><br><span class="line">        return i + 1</span><br><span class="line"></span><br><span class="line">    def randomized_partition(self, p, r):</span><br><span class="line">        i = np.random.randint(p, r + 1) # [p, r] range</span><br><span class="line">        self.A[i], self.A[r] = self.A[r], self.A[i]</span><br><span class="line">        return self.partition(p, r)</span><br><span class="line"></span><br><span class="line">    def randomized_quicksort(self, p, r):</span><br><span class="line">        if p &lt; r:</span><br><span class="line">            q = self.randomized_partition(p, r)</span><br><span class="line">            self.randomized_quicksort(p, q - 1)</span><br><span class="line">            self.randomized_quicksort(q+1, r)</span><br><span class="line">#__________________________________________________________</span><br><span class="line">test_array = [13, 19, 9, 5, 12, 8, 7, 4, 21, 2, 6, 11]</span><br><span class="line">print(&apos;Input array:&apos;, test_array)</span><br><span class="line">sort_task = quicksort(test_array)</span><br><span class="line">sort_task.randomized_quicksort(0, len(test_array) - 1)</span><br><span class="line">print(&apos;Output array: &apos;, test_array)</span><br></pre></td></tr></table></figure></p>
<h2 id="Counting-Sort-Radix-Sort-and-Bucket-Sort"><a href="#Counting-Sort-Radix-Sort-and-Bucket-Sort" class="headerlink" title="Counting Sort, Radix Sort and Bucket Sort"></a>Counting Sort, Radix Sort and Bucket Sort</h2><p>They are not limited by the bound of $ \Omega(n*log(n)) $ because they depend on some requirements or some calculations. </p>
<h3 id="Counting-Sort"><a href="#Counting-Sort" class="headerlink" title="Counting Sort"></a>Counting Sort</h3><ul>
<li>Elements value start from zero and no more than $w$. All elements are integers.</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jiaaodong.github.io/Sunny7464/Sunny7464/2018/08/18/my-first-blog/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jiaao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/Sunny7464/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jiaao & 7">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Sunny7464/2018/08/18/my-first-blog/" itemprop="url">
                  My first blog
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-08-18 11:05:01" itemprop="dateCreated datePublished" datetime="2018-08-18T11:05:01+02:00">2018-08-18</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-12-18 08:42:40" itemprop="dateModified" datetime="2018-12-18T08:42:40+01:00">2018-12-18</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="The-words-before-my-blog"><a href="#The-words-before-my-blog" class="headerlink" title="The words before my blog."></a>The words before my blog.</h1><p>小七真可爱！</p>
<h1 id="Preface"><a href="#Preface" class="headerlink" title="Preface"></a>Preface</h1><p>In this blog, I will share my life and some knowledge.  </p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/Sunny7464/page/2/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/Sunny7464/">1</a><a class="page-number" href="/Sunny7464/page/2/">2</a><span class="page-number current">3</span>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Jiaao</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/Sunny7464/archives/">
                
                    <span class="site-state-item-count">27</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              

              
            </nav>
          

          

          

          
          

          
          

          
            
          
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jiaao</span>

  

  
</div>




  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a class="theme-link" target="_blank" href="https://theme-next.org">NexT.Muse</a> v6.4.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    
	
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/Sunny7464/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/Sunny7464/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/Sunny7464/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/Sunny7464/js/src/utils.js?v=6.4.0"></script>

  <script type="text/javascript" src="/Sunny7464/js/src/motion.js?v=6.4.0"></script>



  
  

  

  


  <script type="text/javascript" src="/Sunny7464/js/src/bootstrap.js?v=6.4.0"></script>



  



  










  





  

  

  

  
  

  
  
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
  

  
    
      <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      },
      TeX: {equationNumbers: { autoNumber: "AMS" }}
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>
<script type="text/javascript" src="//cdn.jsdelivr.net/npm/mathjax@2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    
  


  
  

  

  

  

  

  

</body>
</html>
